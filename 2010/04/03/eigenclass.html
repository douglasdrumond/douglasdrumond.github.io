<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Eigenclass - Café Linear
    
  </title>

  <meta name="description" content="In Ruby, there’s the concept of eigenclasses, or singleton classes. These are classes implicitly defined when attaching methods to a single instance.">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://www.cafelinear.com/2010/04/03/eigenclass.html">
  <link rel="alternate" type="application/rss+xml" title="Café Linear" href="/feed.xml">

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Café Linear</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/articles">Articles</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/portfolio">Portfolio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/talks">Talks</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

<header class="masthead" style="background-image: url('/assets/images/cover.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Eigenclass</h1>
            
            <span class="meta">Posted by
              <a href="#"></a>
              on April 03, 2010 &middot; <span class="reading-time" title="Estimated read time">
  
   2 mins  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <p>In Ruby, there’s the concept of eigenclasses, or singleton classes. These are
classes implicitly defined when attaching methods to a single instance.</p>

<p>From <a href="http://en.wikipedia.org/wiki/Ruby_(programming_language)">Wikipedia</a>:</p>

<blockquote>
  <p>Ruby is <a href="http://en.wikipedia.org/wiki/Object-oriented">object-oriented</a>: every
data type is an object, including classes and types which many other languages
designate as primitives (such as
<a href="http://en.wikipedia.org/wiki/Integer_(computer_science)">integers</a>, booleans,
and “<a href="http://en.wikipedia.org/wiki/Pointer_(computing)#Null_pointer">nil</a>”).
Every <a href="http://en.wikipedia.org/wiki/Function_(programming)">function</a> is
a <a href="http://en.wikipedia.org/wiki/Method_(programming)">method</a>. Named values
(variables) always designate references to objects, not the objects
themselves. Ruby supports
<a href="http://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)">inheritance</a>
with <a href="http://en.wikipedia.org/wiki/Dynamic_dispatch">dynamic dispatch</a>,
<a href="http://en.wikipedia.org/wiki/Mixin">mixins</a> and singleton methods (belonging
to, and defined for, a single
<a href="http://en.wikipedia.org/wiki/Instance_(computer_science)">instance</a> rather
than being defined on the class).</p>
</blockquote>

<p>Here I present an example I hope will make it simple to understand. We know
martial artists can fight, right? And we know Jackie Chan can play while
fighting, right? Now suppose there’s no Sammo Hung and Jackie Chan is the only
one who do fancy things while fighting. All other martial artists are Bruce
Lee-like. What do we do? Extend <code class="highlighter-rouge">MartialArtist</code> class to create
a <code class="highlighter-rouge">FunnyMartialArtist</code> class which will get instantiated only once? Instead, we
can just add a method <code class="highlighter-rouge">do_funny_fighting</code> to <code class="highlighter-rouge">jackie_chan</code> object which is an
instance of <code class="highlighter-rouge">MartialArtist</code>. This way:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">MartialArtist</span>
  <span class="o">...</span>
<span class="k">end</span>

<span class="n">jackie_chan</span> <span class="o">=</span> <span class="no">MartialArtist</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bruce_lee</span> <span class="o">=</span> <span class="no">MartialArtist</span><span class="p">.</span><span class="nf">new</span>

<span class="k">def</span> <span class="nc">jackie_chan</span><span class="o">.</span><span class="nf">do_funny_fighting</span>
  <span class="o">...</span>
<span class="k">end</span></code></pre></figure>

<p>Now we can call <code class="highlighter-rouge">jackie_chan.do_funny_fighting</code>, but not
<code class="highlighter-rouge">bruce_lee.do_funny_fighting</code>. This is a singleton method.</p>

<p>How does this work? Under the hood, there’s a pointer in <code class="highlighter-rouge">jackie_chan</code> to the
<code class="highlighter-rouge">MartialArtist</code> class. If Ruby modifies its content to add the new method, it
will also affects <code class="highlighter-rouge">bruce_lee</code> object. So, Ruby creates a new class, adds the
method to it and updates <code class="highlighter-rouge">jackie_chan</code> class pointer to point to this new class
(and this class points to previous <code class="highlighter-rouge">MartialArtist</code> class). This new class is an
eigenclass.</p>

<p>That’s a simple way to say it without dealing with much details. But if you’re
eager to learn more, I recommend Patrick Farley’s post about
<a href="https://web.archive.org/web/20100325081153/http://www.klankboomklang.com/2007/10/05/the-metaclass">metaclasses</a>.
There are also a lot of links there to dig deeper.</p>


        <hr>

        <div class="clearfix">

          
          <a class="btn btn-primary float-left" href="/2010/02/28/the-coffee-song.html" data-toggle="tooltip" data-placement="top" title="The Coffee Song">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          
          <a class="btn btn-primary float-right" href="/2010/04/19/for-fun-the-bizarre-cathedral.html" data-toggle="tooltip" data-placement="top" title="For fun: the Bizarre Cathedral">Next<span class="d-none d-md-inline">
              Post</span> &rarr;</a>
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:my first name @ cafelinear.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/douglasdrumz">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/douglasdrumz">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://instagram.com/cafelinear">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy;  2020</p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




  

</body>

</html>
